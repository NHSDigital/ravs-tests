INFO     root:conftest.py:47 EDGE browser version is : 130.0.2849.80
DEBUG    pytest_bdd.scenario:scenario.py:145 Adding providers for fixture 'pytestbdd_stepimpl_given_I login to RAVS and set vaccinator details with BIRCH HOUSE and Hospital hub for staff and patients and get patient details for 9470040228 with option 2 and choose to vaccinate with vaccine details as COVID-19, SB12345-12A with 19/2/2026': [<FixtureDef argname='pytestbdd_stepdef_given_I login to RAVS and set vaccinator details with {site} and {care_model} and get patient details for {nhs_number} with option {index} and choose to vaccinate with vaccine details as {chosen_vaccine}, {batch_number} with {batch_expiry_date}' scope='function' baseid='tests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py'>]
DEBUG    pytest_bdd.scenario:scenario.py:145 Adding providers for fixture 'pytestbdd_stepimpl_given_I search for a patient with the NHS number in the find a patient screen': [<FixtureDef argname='pytestbdd_stepdef_given_I search for a patient with the NHS number in the find a patient screen' scope='function' baseid='tests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py'>]
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_entered_nhs_number_as9470040228_and_clicked_search_for_patient_button.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_entered_nhs_number_as9470040228_and_clicked_search_for_patient_button.png
DEBUG    pytest_bdd.scenario:scenario.py:145 Adding providers for fixture 'pytestbdd_stepimpl_given_I open the patient record by clicking on patient HERBERT HAAG': [<FixtureDef argname='pytestbdd_stepdef_given_I open the patient record by clicking on patient {name}' scope='function' baseid='tests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py'>]
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_before_clicking_patient_name.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_before_clicking_patient_name.png
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_before_clicking_patient_name.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_before_clicking_patient_name.png
DEBUG    pytest_bdd.scenario:scenario.py:145 Adding providers for fixture 'pytestbdd_stepimpl_when_I click choose vaccine button and choose the COVID-19, SB12345-12A with 19/2/2026 and click continue': [<FixtureDef argname='pytestbdd_stepdef_when_I click choose vaccine button and choose the {chosen_vaccine}, {batch_number} with {batch_expiry_date} and click continue' scope='function' baseid='tests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py'>]
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_clicked_on_patient_HERBERT HAAG_and_clicked_choose_vaccine_button.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_clicked_on_patient_HERBERT HAAG_and_clicked_choose_vaccine_button.png
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_selected_vaccine_COVID-19_and_Comirnaty 10 JN.1_and_clicked_continue_button.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_selected_vaccine_COVID-19_and_Comirnaty 10 JN.1_and_clicked_continue_button.png
DEBUG    pytest_bdd.scenario:scenario.py:145 Adding providers for fixture "pytestbdd_stepimpl_when_I assess the patient's yes with the details and date as today-1 and click continue to record consent screen button": [<FixtureDef argname="pytestbdd_stepdef_when_I assess the patient's {eligibility} with the details and date as {assess_date} and click continue to record consent screen button" scope='function' baseid='tests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py'>]
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_clicked_eligibility_yes_and_selected_eligibility_type.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_clicked_eligibility_yes_and_selected_eligibility_type.png
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_clicked_patient_give_vaccine_radio_button.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_clicked_patient_give_vaccine_radio_button.png
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_clicked_continue_to_record_consent_button.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_clicked_continue_to_record_consent_button.png
DEBUG    pytest_bdd.scenario:scenario.py:145 Adding providers for fixture 'pytestbdd_stepimpl_when_I record yes with the details and click continue to vaccinate button': [<FixtureDef argname='pytestbdd_stepdef_when_I record {consent} with the details and click continue to vaccinate button' scope='function' baseid='tests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py'>]
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_before_selecting_consent_clinician.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_before_selecting_consent_clinician.png
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_clicked_continue_to_vaccinate_button.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_clicked_continue_to_vaccinate_button.png
DEBUG    pytest_bdd.scenario:scenario.py:145 Adding providers for fixture 'pytestbdd_stepimpl_when_I record yes details and date as today and click Continue to Check and confirm screen': [<FixtureDef argname='pytestbdd_stepdef_when_I record {vaccination} details and date as {vaccination_date} and click Continue to Check and confirm screen' scope='function' baseid='tests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py'>]
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_entered_vaccination_details.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_entered_vaccination_details.png
INFO     root:test_record_a_vaccine_for_patient_with_nhs_number_steps.py:140 {'nhs_number': '9470040228', 'index': '2', 'chosen_vaccine': 'COVID-19', 'chosen_vaccine_type': 'Comirnaty 10 JN.1', 'batch_number': 'SB12345-12A', 'site': 'BIRCH HOUSE', 'care_model': 'Community Pharmacy', 'batch_expiry_date': '19/2/2026', 'patient_name': 'HERBERT HAAG', 'immunisation_history_records_count_before_vaccination': 8, 'eligible_decision': 'yes', 'legal_mechanism': 'Patient Specific Direction (PSD)', 'eligibility_type': 'Healthcare workers', 'healthcare_worker': 'All other professionally qualified clinical staff', 'eligibility_assessing_clinician': 'Mark Chapman - mark.chapman1@nhs.net', 'eligibility_assessment_date': '11/11/2024', 'eligibility_assessment_outcome': 'Give vaccine', 'eligibility_assessment_no_vaccine_given_reason': 'Vaccine contraindicated', 'assessment_comments': 'Assessment comments 11/11/2024HERBERT HAAG', 'consent_decision': 'yes', 'consent_given_by': 'Court appointed deputy', 'consent_clinician_details': 'Test Clinicians - test@nhs.net', 'no_consent_reason': 'Personal Choice', 'vaccinated_decision': 'yes', 'vaccination_date': '12/11/2024', 'vaccination_site': 'Left buttock', 'dose_amount': '0.3', 'vaccinator': 'Test Clinicians - test@nhs.net', 'vaccination_comments': 'Comirnaty 10 JN.1vaccination given on 12/11/2024 for HERBERT HAAG', 'no_vaccination_reason': 'Vaccine contraindicated'}
DEBUG    pytest_bdd.scenario:scenario.py:145 Adding providers for fixture 'pytestbdd_stepimpl_then_I need to be able to see the patient HERBERT HAAG, 14/12/1922, 10 COASTAL ROAD, HEST BANK, LANCASTER, LA2 6HN and vaccination details on the check and confirm screen': [<FixtureDef argname='pytestbdd_stepdef_then_I need to be able to see the patient {name}, {dob}, {address} and vaccination details on the check and confirm screen' scope='function' baseid='tests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py'>]
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_check_and_confirm_screen_before_assertion.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_check_and_confirm_screen_before_assertion.png
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_vaccination_dose_amount.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_vaccination_dose_amount.png
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_check_and_confirm_screen_after_assertion.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_check_and_confirm_screen_after_assertion.png
DEBUG    pytest_bdd.scenario:scenario.py:145 Adding providers for fixture 'pytestbdd_stepimpl_then_when I click confirm and save button, I should see a record saved dialogue': [<FixtureDef argname='pytestbdd_stepdef_then_when I click confirm and save button, I should see a record saved dialogue' scope='function' baseid='tests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py'>]
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_patient_details_screen_with_immunisation_history.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_patient_details_screen_with_immunisation_history.png
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_before_assert_record_saved.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_before_assert_record_saved.png
DEBUG    pytest_bdd.scenario:scenario.py:145 Adding providers for fixture 'pytestbdd_stepimpl_then_I search for a patient with the NHS number in the find a patient screen': [<FixtureDef argname='pytestbdd_stepdef_then_I search for a patient with the NHS number in the find a patient screen' scope='function' baseid='tests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py'>]
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_entered_nhs_number_as9470040228_and_clicked_search_for_patient_button.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_entered_nhs_number_as9470040228_and_clicked_search_for_patient_button.png
DEBUG    pytest_bdd.scenario:scenario.py:145 Adding providers for fixture 'pytestbdd_stepimpl_then_I open the patient record by clicking on patient HERBERT HAAG': [<FixtureDef argname='pytestbdd_stepdef_then_I open the patient record by clicking on patient {name}' scope='function' baseid='tests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py'>]
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_before_clicking_patient_name.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_before_clicking_patient_name.png
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_before_clicking_patient_name.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_before_clicking_patient_name.png
DEBUG    pytest_bdd.scenario:scenario.py:145 Adding providers for fixture 'pytestbdd_stepimpl_then_the immunisation history of the patient should be updated in the patient details page': [<FixtureDef argname='pytestbdd_stepdef_then_the immunisation history of the patient should be updated in the patient details page' scope='function' baseid='tests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py'>]
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_immunisation_history_records_count_after_vaccination.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_immunisation_history_records_count_after_vaccination.png
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_click_delete_history_link.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_click_delete_history_link.png
DEBUG    root:init_helpers.py:102 Directory verified: /app/data/attachments
DEBUG    root:init_helpers.py:108 Saving screenshot to: /app/data/attachments/dev_edge_130.0.2849.80_click_delete_vaccination_button.png
DEBUG    root:init_helpers.py:114 Screenshot attached at: /app/data/attachments/dev_edge_130.0.2849.80_click_delete_vaccination_button.png