{
  "uid" : "c3ead38ee8204b18",
  "name" : "Record a vaccine with nhs number [12-9437540233-ALBERT HOUSE-Hospital Hub-yes-today-15-yes-yes-today-7-RANDY FOGDEN-8/6/1961-10 ASHVILLE TERRACE, MANCHESTER, M40 9WG-COVID-19-SDYY2-18E-19/10/2026]",
  "fullName" : "/app/features/record_a_vaccine_for_patient_with_nhs_number.feature:Record a vaccine with nhs number",
  "historyId" : "0c62c3f72de8d9d08ce8753371e9eddf",
  "time" : {
    "start" : 1729680777982,
    "stop" : 1729680951679,
    "duration" : 173697
  },
  "status" : "failed",
  "statusMessage" : "AssertionError: assert None == 'Unknown vaccine type'\n +  where None = get_patient_vaccination_dose_amount_value()",
  "statusTrace" : "fixturefunc = <function step_see_patient_details_on_check_and_confirm_screen at 0x7fd5c09d6340>\nrequest = <FixtureRequest for <Function test_record_a_vaccine_with_nhs_number[12-9437540233-ALBERT HOUSE-Hospital Hub-yes-today-15-yes-yes-today-7-RANDY FOGDEN-8/6/1961-10 ASHVILLE TERRACE, MANCHESTER, M40 9WG-COVID-19-SDYY2-18E-19/10/2026]>>\nkwargs = {'address': '10 ASHVILLE TERRACE, MANCHESTER, M40 9WG', 'dob': '8/6/1961', 'name': 'RANDY FOGDEN', 'shared_data': {'as...h_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-18E', 'care_model': 'Vaccination centre open to the public', ...}}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n.tox/py311/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nshared_data = {'assessment_comments': 'Assessment comments 08/10/2024RANDY FOGDEN', 'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-18E', 'care_model': 'Vaccination centre open to the public', ...}\nname = 'RANDY FOGDEN', dob = '8/6/1961'\naddress = '10 ASHVILLE TERRACE, MANCHESTER, M40 9WG'\n\n    @then(parse(\"I need to be able to see the patient {name}, {dob}, {address} and vaccination details on the check and confirm screen\"))\n    def step_see_patient_details_on_check_and_confirm_screen(shared_data, name, dob, address):\n        if shared_data[\"vaccinated_decision\"].lower() == \"Yes\".lower() and shared_data[\"consent_decision\"].lower() == \"Yes\".lower() and shared_data[\"eligibility_assessment_outcome\"].lower() == \"Give vaccine\".lower():\n            attach_screenshot(\"check_and_confirm_screen_before_assertion\")\n            assert get_patient_name_value() == shared_data[\"patient_name\"]\n            assert get_patient_address_value() == address\n>           assert get_patient_vaccination_dose_amount_value() == shared_data[\"dose_amount\"]\nE           AssertionError: assert None == 'Unknown vaccine type'\nE            +  where None = get_patient_vaccination_dose_amount_value()\n\ntests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py:147: AssertionError",
  "flaky" : false,
  "newFailed" : false,
  "newBroken" : false,
  "newPassed" : false,
  "retriesCount" : 0,
  "retriesStatusChange" : false,
  "beforeStages" : [ ],
  "testStage" : {
    "status" : "failed",
    "statusMessage" : "AssertionError: assert None == 'Unknown vaccine type'\n +  where None = get_patient_vaccination_dose_amount_value()",
    "statusTrace" : "fixturefunc = <function step_see_patient_details_on_check_and_confirm_screen at 0x7fd5c09d6340>\nrequest = <FixtureRequest for <Function test_record_a_vaccine_with_nhs_number[12-9437540233-ALBERT HOUSE-Hospital Hub-yes-today-15-yes-yes-today-7-RANDY FOGDEN-8/6/1961-10 ASHVILLE TERRACE, MANCHESTER, M40 9WG-COVID-19-SDYY2-18E-19/10/2026]>>\nkwargs = {'address': '10 ASHVILLE TERRACE, MANCHESTER, M40 9WG', 'dob': '8/6/1961', 'name': 'RANDY FOGDEN', 'shared_data': {'as...h_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-18E', 'care_model': 'Vaccination centre open to the public', ...}}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n.tox/py311/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nshared_data = {'assessment_comments': 'Assessment comments 08/10/2024RANDY FOGDEN', 'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-18E', 'care_model': 'Vaccination centre open to the public', ...}\nname = 'RANDY FOGDEN', dob = '8/6/1961'\naddress = '10 ASHVILLE TERRACE, MANCHESTER, M40 9WG'\n\n    @then(parse(\"I need to be able to see the patient {name}, {dob}, {address} and vaccination details on the check and confirm screen\"))\n    def step_see_patient_details_on_check_and_confirm_screen(shared_data, name, dob, address):\n        if shared_data[\"vaccinated_decision\"].lower() == \"Yes\".lower() and shared_data[\"consent_decision\"].lower() == \"Yes\".lower() and shared_data[\"eligibility_assessment_outcome\"].lower() == \"Give vaccine\".lower():\n            attach_screenshot(\"check_and_confirm_screen_before_assertion\")\n            assert get_patient_name_value() == shared_data[\"patient_name\"]\n            assert get_patient_address_value() == address\n>           assert get_patient_vaccination_dose_amount_value() == shared_data[\"dose_amount\"]\nE           AssertionError: assert None == 'Unknown vaccine type'\nE            +  where None = get_patient_vaccination_dose_amount_value()\n\ntests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py:147: AssertionError",
    "steps" : [ {
      "name" : "Given I login to RAVS and set vaccinator details with ALBERT HOUSE and Hospital Hub and get patient details for 9437540233 with option 12 and choose to vaccinate with vaccine details as COVID-19, SDYY2-18E with 19/10/2026",
      "time" : {
        "start" : 1729680777982,
        "stop" : 1729680862102,
        "duration" : 84120
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    }, {
      "name" : "And I search for a patient with the NHS number in the find a patient screen",
      "time" : {
        "start" : 1729680862102,
        "stop" : 1729680862431,
        "duration" : 329
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "5d260a7af7d830aa",
        "name" : "dev_chrome_130.0.6723.69_entered_nhs_number_as9437540233_and_clicked_search_for_patient_button.png",
        "source" : "5d260a7af7d830aa.png",
        "type" : "image/png",
        "size" : 49848
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I open the patient record by clicking on patient RANDY FOGDEN",
      "time" : {
        "start" : 1729680862431,
        "stop" : 1729680862612,
        "duration" : 181
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "6cdea328ebfcb3a5",
        "name" : "dev_chrome_130.0.6723.69_before_clicking_patient_name.png",
        "source" : "6cdea328ebfcb3a5.png",
        "type" : "image/png",
        "size" : 49885
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "When I click choose vaccine button and choose the COVID-19, SDYY2-18E with 19/10/2026 and click continue",
      "time" : {
        "start" : 1729680862612,
        "stop" : 1729680866398,
        "duration" : 3786
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "c2a837cc7920ce",
        "name" : "dev_chrome_130.0.6723.69_clicked_on_patient_RANDY FOGDEN_and_clicked_choose_vaccine_button.png",
        "source" : "c2a837cc7920ce.png",
        "type" : "image/png",
        "size" : 54975
      }, {
        "uid" : "f571424ca85ff77f",
        "name" : "dev_chrome_130.0.6723.69_selected_vaccine_COVID-19_and_Comirnaty 3 JN.1_and_clicked_continue_button.png",
        "source" : "f571424ca85ff77f.png",
        "type" : "image/png",
        "size" : 74285
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 2,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I assess the patient's yes with the details and date as today-15 and click continue to record consent screen button",
      "time" : {
        "start" : 1729680866398,
        "stop" : 1729680868164,
        "duration" : 1766
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "f7a1b8ba6444568f",
        "name" : "dev_chrome_130.0.6723.69_clicked_eligibility_yes_and_selected_eligibility_type.png",
        "source" : "f7a1b8ba6444568f.png",
        "type" : "image/png",
        "size" : 72217
      }, {
        "uid" : "f336fe410f570efa",
        "name" : "dev_chrome_130.0.6723.69_clicked_patient_give_vaccine_radio_button.png",
        "source" : "f336fe410f570efa.png",
        "type" : "image/png",
        "size" : 74151
      }, {
        "uid" : "90e6461f31937ab4",
        "name" : "dev_chrome_130.0.6723.69_clicked_continue_to_record_consent_button.png",
        "source" : "90e6461f31937ab4.png",
        "type" : "image/png",
        "size" : 42976
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I record yes with the details and click continue to vaccinate button",
      "time" : {
        "start" : 1729680868164,
        "stop" : 1729680869648,
        "duration" : 1484
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "7f2d45fcd8f6aa8d",
        "name" : "dev_chrome_130.0.6723.69_before_selecting_consent_clinician.png",
        "source" : "7f2d45fcd8f6aa8d.png",
        "type" : "image/png",
        "size" : 42976
      }, {
        "uid" : "5f9c8bd7a6145617",
        "name" : "dev_chrome_130.0.6723.69_clicked_continue_to_vaccinate_button.png",
        "source" : "5f9c8bd7a6145617.png",
        "type" : "image/png",
        "size" : 58632
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 2,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I record yes details and date as today-7 and click Continue to Check and confirm screen",
      "time" : {
        "start" : 1729680869648,
        "stop" : 1729680911163,
        "duration" : 41515
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "557be0e070890fba",
        "name" : "dev_chrome_130.0.6723.69_entered_vaccination_details.png",
        "source" : "557be0e070890fba.png",
        "type" : "image/png",
        "size" : 51175
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "Then I need to be able to see the patient RANDY FOGDEN, 8/6/1961, 10 ASHVILLE TERRACE, MANCHESTER, M40 9WG and vaccination details on the check and confirm screen",
      "time" : {
        "start" : 1729680911163,
        "stop" : 1729680951679,
        "duration" : 40516
      },
      "status" : "failed",
      "statusMessage" : "assert None == 'Unknown vaccine type'\n +  where None = get_patient_vaccination_dose_amount_value()",
      "statusTrace" : "AssertionError: assert None == 'Unknown vaccine type'\n +  where None = get_patient_vaccination_dose_amount_value()\n",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "b7f4e35f89791229",
        "name" : "dev_chrome_130.0.6723.69_check_and_confirm_screen_before_assertion.png",
        "source" : "b7f4e35f89791229.png",
        "type" : "image/png",
        "size" : 51264
      }, {
        "uid" : "3f01f71f14c1055",
        "name" : "dev_chrome_130.0.6723.69_vaccination_dose_amount.png",
        "source" : "3f01f71f14c1055.png",
        "type" : "image/png",
        "size" : 51264
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 2,
      "shouldDisplayMessage" : true,
      "hasContent" : true
    } ],
    "attachments" : [ {
      "uid" : "34511f7ef0b15a9f",
      "name" : "log",
      "source" : "34511f7ef0b15a9f.txt",
      "type" : "text/plain",
      "size" : 8391
    } ],
    "parameters" : [ ],
    "stepsCount" : 8,
    "attachmentsCount" : 13,
    "shouldDisplayMessage" : true,
    "hasContent" : true
  },
  "afterStages" : [ ],
  "labels" : [ {
    "name" : "host",
    "value" : "93d21e8b6fbe"
  }, {
    "name" : "thread",
    "value" : "1102-MainThread"
  }, {
    "name" : "framework",
    "value" : "pytest-bdd"
  }, {
    "name" : "language",
    "value" : "cpython3"
  }, {
    "name" : "feature",
    "value" : "Record vaccine"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ {
    "name" : "address",
    "value" : "10 ASHVILLE TERRACE, MANCHESTER, M40 9WG"
  }, {
    "name" : "assess_date",
    "value" : "today-15"
  }, {
    "name" : "batch_expiry_date",
    "value" : "19/10/2026"
  }, {
    "name" : "batch_number",
    "value" : "SDYY2-18E"
  }, {
    "name" : "care_model",
    "value" : "Hospital Hub"
  }, {
    "name" : "chosen_vaccine",
    "value" : "COVID-19"
  }, {
    "name" : "consent",
    "value" : "yes"
  }, {
    "name" : "dob",
    "value" : "8/6/1961"
  }, {
    "name" : "eligibility",
    "value" : "yes"
  }, {
    "name" : "index",
    "value" : "12"
  }, {
    "name" : "name",
    "value" : "RANDY FOGDEN"
  }, {
    "name" : "nhs_number",
    "value" : "9437540233"
  }, {
    "name" : "site",
    "value" : "ALBERT HOUSE"
  }, {
    "name" : "vaccination",
    "value" : "yes"
  }, {
    "name" : "vaccination_date",
    "value" : "today-7"
  } ],
  "links" : [ ],
  "hidden" : false,
  "retry" : false,
  "extra" : {
    "severity" : "normal",
    "retries" : [ ],
    "categories" : [ {
      "name" : "Product defects",
      "matchedStatuses" : [ ],
      "flaky" : false
    } ],
    "tags" : [ ]
  },
  "source" : "c3ead38ee8204b18.json",
  "parameterValues" : [ "10 ASHVILLE TERRACE, MANCHESTER, M40 9WG", "today-15", "19/10/2026", "SDYY2-18E", "Hospital Hub", "COVID-19", "yes", "8/6/1961", "yes", "12", "RANDY FOGDEN", "9437540233", "ALBERT HOUSE", "yes", "today-7" ]
}