{
  "uid" : "d9a0afd7a5dc2324",
  "name" : "Record a vaccine with nhs number [11-9450134391-ALBERT HOUSE-Vaccination Centre-yes-today-3-yes-yes-today-MARIAN PIESSE-17/7/1994-2 BIRCH STREET, LYTHAM ST. ANNES, LANCS, FY8 5DT-Flu-Quadrivalent Influvac sub - unit Tetra - QIVe-SDYY2-14C-19/10/2026]",
  "fullName" : "/app/features/record_a_vaccine_for_patient_with_nhs_number.feature:Record a vaccine with nhs number",
  "historyId" : "cee9bdacf5d513d90c65c8e5e657771d",
  "time" : {
    "start" : 1723827316833,
    "stop" : 1723827352217,
    "duration" : 35384
  },
  "status" : "failed",
  "statusMessage" : "TypeError: choose_vaccine_and_vaccine_type_for_patient() missing 1 required positional argument: 'vaccine_type'",
  "statusTrace" : "fixturefunc = <function step_choose_vaccine_and_vaccine_type at 0x7fd094d82700>\nrequest = <FixtureRequest for <Function test_record_a_vaccine_with_nhs_number[11-9450134391-ALBERT HOUSE-Vaccination Centre-yes-...IRCH STREET, LYTHAM ST. ANNES, LANCS, FY8 5DT-Flu-Quadrivalent Influvac sub - unit Tetra - QIVe-SDYY2-14C-19/10/2026]>>\nkwargs = {'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-14C', 'chosen_vaccine': 'Flu', 'shared_data': {'batch_expir...te': '19/10/2026', 'batch_number': 'SDYY2-14C', 'care_model': 'Vaccination Centre', 'chosen_vaccine': 'Flu', ...}, ...}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n.tox/py311/lib/python3.11/site-packages/_pytest/fixtures.py:897: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nshared_data = {'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-14C', 'care_model': 'Vaccination Centre', 'chosen_vaccine': 'Flu', ...}\nchosen_vaccine = 'Flu'\nvaccine_type = 'Quadrivalent Influvac sub - unit Tetra - QIVe'\nbatch_number = 'SDYY2-14C', batch_expiry_date = '19/10/2026'\n\n    @when(parse(\"I click choose vaccine button and choose the {chosen_vaccine}, {vaccine_type}, {batch_number} with {batch_expiry_date} and click continue\"))\n    def step_choose_vaccine_and_vaccine_type(shared_data, chosen_vaccine, vaccine_type, batch_number, batch_expiry_date):\n        immunisation_history_records_count_before_vaccination = click_on_patient_search_result_and_click_choose_vaccine(shared_data['patient_name'], chosen_vaccine)\n        shared_data[\"immunisation_history_records_count_before_vaccination\"] = immunisation_history_records_count_before_vaccination\n>       choose_vaccine_and_vaccine_type_for_patient(chosen_vaccine, vaccine_type)\nE       TypeError: choose_vaccine_and_vaccine_type_for_patient() missing 1 required positional argument: 'vaccine_type'\n\ntests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py:73: TypeError",
  "flaky" : false,
  "newFailed" : false,
  "newBroken" : false,
  "newPassed" : false,
  "retriesCount" : 0,
  "retriesStatusChange" : false,
  "beforeStages" : [ ],
  "testStage" : {
    "status" : "failed",
    "statusMessage" : "TypeError: choose_vaccine_and_vaccine_type_for_patient() missing 1 required positional argument: 'vaccine_type'",
    "statusTrace" : "fixturefunc = <function step_choose_vaccine_and_vaccine_type at 0x7fd094d82700>\nrequest = <FixtureRequest for <Function test_record_a_vaccine_with_nhs_number[11-9450134391-ALBERT HOUSE-Vaccination Centre-yes-...IRCH STREET, LYTHAM ST. ANNES, LANCS, FY8 5DT-Flu-Quadrivalent Influvac sub - unit Tetra - QIVe-SDYY2-14C-19/10/2026]>>\nkwargs = {'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-14C', 'chosen_vaccine': 'Flu', 'shared_data': {'batch_expir...te': '19/10/2026', 'batch_number': 'SDYY2-14C', 'care_model': 'Vaccination Centre', 'chosen_vaccine': 'Flu', ...}, ...}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n.tox/py311/lib/python3.11/site-packages/_pytest/fixtures.py:897: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nshared_data = {'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-14C', 'care_model': 'Vaccination Centre', 'chosen_vaccine': 'Flu', ...}\nchosen_vaccine = 'Flu'\nvaccine_type = 'Quadrivalent Influvac sub - unit Tetra - QIVe'\nbatch_number = 'SDYY2-14C', batch_expiry_date = '19/10/2026'\n\n    @when(parse(\"I click choose vaccine button and choose the {chosen_vaccine}, {vaccine_type}, {batch_number} with {batch_expiry_date} and click continue\"))\n    def step_choose_vaccine_and_vaccine_type(shared_data, chosen_vaccine, vaccine_type, batch_number, batch_expiry_date):\n        immunisation_history_records_count_before_vaccination = click_on_patient_search_result_and_click_choose_vaccine(shared_data['patient_name'], chosen_vaccine)\n        shared_data[\"immunisation_history_records_count_before_vaccination\"] = immunisation_history_records_count_before_vaccination\n>       choose_vaccine_and_vaccine_type_for_patient(chosen_vaccine, vaccine_type)\nE       TypeError: choose_vaccine_and_vaccine_type_for_patient() missing 1 required positional argument: 'vaccine_type'\n\ntests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py:73: TypeError",
    "steps" : [ {
      "name" : "Given I login to RAVS and set vaccinator details with ALBERT HOUSE and Vaccination Centre and get patient details for 9450134391 with option 11 and choose to vaccinate with vaccine details as Flu, Quadrivalent Influvac sub - unit Tetra - QIVe, SDYY2-14C with 19/10/2026",
      "time" : {
        "start" : 1723827316833,
        "stop" : 1723827345065,
        "duration" : 28232
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "c5a7e5340676551d",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_settings.png",
        "source" : "c5a7e5340676551d.png",
        "type" : "image/png",
        "size" : 36740
      }, {
        "uid" : "985fa41038246312",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_vaccines.png",
        "source" : "985fa41038246312.png",
        "type" : "image/png",
        "size" : 37656
      }, {
        "uid" : "ca042628153e44b1",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_add_vaccines.png",
        "source" : "ca042628153e44b1.png",
        "type" : "image/png",
        "size" : 127948
      }, {
        "uid" : "58b30a8922a84510",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_site_radio_button.png",
        "source" : "58b30a8922a84510.png",
        "type" : "image/png",
        "size" : 73798
      }, {
        "uid" : "93d2be17202f9eb6",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_flu_vaccine_checkbox.png",
        "source" : "93d2be17202f9eb6.png",
        "type" : "image/png",
        "size" : 84685
      }, {
        "uid" : "9c796a69df3a732b",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_flu_vaccine_type_checkbox.png",
        "source" : "9c796a69df3a732b.png",
        "type" : "image/png",
        "size" : 106803
      }, {
        "uid" : "de831e4eb7ab1916",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_add_vaccine_button.png",
        "source" : "de831e4eb7ab1916.png",
        "type" : "image/png",
        "size" : 107132
      }, {
        "uid" : "5c2b2adf6c3e1f89",
        "name" : "dev_chrome_127.0.6533.119_entered_batch_number.png",
        "source" : "5c2b2adf6c3e1f89.png",
        "type" : "image/png",
        "size" : 119422
      }, {
        "uid" : "f456c9522543783d",
        "name" : "dev_chrome_127.0.6533.119_entered_expiry_date.png",
        "source" : "f456c9522543783d.png",
        "type" : "image/png",
        "size" : 87995
      }, {
        "uid" : "7ab09a37bda09f76",
        "name" : "dev_chrome_127.0.6533.119_clicked_add_batch_button.png",
        "source" : "7ab09a37bda09f76.png",
        "type" : "image/png",
        "size" : 91605
      }, {
        "uid" : "3c941e9bc1921b0c",
        "name" : "dev_chrome_127.0.6533.119_clicked_confirm_choices_button.png",
        "source" : "3c941e9bc1921b0c.png",
        "type" : "image/png",
        "size" : 67637
      }, {
        "uid" : "9ccde77feaff2457",
        "name" : "dev_chrome_127.0.6533.119_clicked_confirm_choices_button.png",
        "source" : "9ccde77feaff2457.png",
        "type" : "image/png",
        "size" : 84842
      }, {
        "uid" : "3a96676c3620d75d",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_settings.png",
        "source" : "3a96676c3620d75d.png",
        "type" : "image/png",
        "size" : 59498
      }, {
        "uid" : "9c711045ce203104",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_vaccines.png",
        "source" : "9c711045ce203104.png",
        "type" : "image/png",
        "size" : 37656
      }, {
        "uid" : "54aafc66c547722",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_add_vaccines.png",
        "source" : "54aafc66c547722.png",
        "type" : "image/png",
        "size" : 127948
      }, {
        "uid" : "8263a833fa107ef1",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_site_radio_button.png",
        "source" : "8263a833fa107ef1.png",
        "type" : "image/png",
        "size" : 73798
      }, {
        "uid" : "5ba44cda3d6b7ef5",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_flu_vaccine_checkbox.png",
        "source" : "5ba44cda3d6b7ef5.png",
        "type" : "image/png",
        "size" : 84685
      }, {
        "uid" : "c3316fb5768bae05",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_flu_vaccine_type_checkbox.png",
        "source" : "c3316fb5768bae05.png",
        "type" : "image/png",
        "size" : 106803
      }, {
        "uid" : "a8758431c2bdb319",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_add_vaccine_button.png",
        "source" : "a8758431c2bdb319.png",
        "type" : "image/png",
        "size" : 107118
      }, {
        "uid" : "e81f73b7b94c5500",
        "name" : "dev_chrome_127.0.6533.119_entered_batch_number.png",
        "source" : "e81f73b7b94c5500.png",
        "type" : "image/png",
        "size" : 119433
      }, {
        "uid" : "745e3211e81ec531",
        "name" : "dev_chrome_127.0.6533.119_entered_expiry_date.png",
        "source" : "745e3211e81ec531.png",
        "type" : "image/png",
        "size" : 88100
      }, {
        "uid" : "c60873a25c72a659",
        "name" : "dev_chrome_127.0.6533.119_clicked_add_batch_button.png",
        "source" : "c60873a25c72a659.png",
        "type" : "image/png",
        "size" : 90523
      }, {
        "uid" : "c268fc4abda98ddb",
        "name" : "dev_chrome_127.0.6533.119_clicked_confirm_choices_button.png",
        "source" : "c268fc4abda98ddb.png",
        "type" : "image/png",
        "size" : 66856
      }, {
        "uid" : "e4ee8d64f31c24a5",
        "name" : "dev_chrome_127.0.6533.119_clicked_confirm_choices_button.png",
        "source" : "e4ee8d64f31c24a5.png",
        "type" : "image/png",
        "size" : 82770
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 24,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I search for a patient with the NHS number in the find a patient screen",
      "time" : {
        "start" : 1723827345066,
        "stop" : 1723827346117,
        "duration" : 1051
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "8a30070494a19173",
        "name" : "dev_chrome_127.0.6533.119_entered_nhs_number_as9450134391_and_clicked_search_for_patient_button.png",
        "source" : "8a30070494a19173.png",
        "type" : "image/png",
        "size" : 75765
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I open the patient record by clicking on patient MARIAN PIESSE",
      "time" : {
        "start" : 1723827346118,
        "stop" : 1723827346568,
        "duration" : 450
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "c6936e9b585f8c9a",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_patient_name.png",
        "source" : "c6936e9b585f8c9a.png",
        "type" : "image/png",
        "size" : 75816
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "When I click choose vaccine button and choose the Flu, Quadrivalent Influvac sub - unit Tetra - QIVe, SDYY2-14C with 19/10/2026 and click continue",
      "time" : {
        "start" : 1723827346568,
        "stop" : 1723827352217,
        "duration" : 5649
      },
      "status" : "failed",
      "statusMessage" : "choose_vaccine_and_vaccine_type_for_patient() missing 1 required positional argument: 'vaccine_type'",
      "statusTrace" : "TypeError: choose_vaccine_and_vaccine_type_for_patient() missing 1 required positional argument: 'vaccine_type'\n",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "23ab3189857fca9a",
        "name" : "dev_chrome_127.0.6533.119_clicked_on_patient_MARIAN PIESSE_and_clicked_choose_vaccine_button.png",
        "source" : "23ab3189857fca9a.png",
        "type" : "image/png",
        "size" : 101475
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : true,
      "hasContent" : true
    } ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 4,
    "attachmentsCount" : 27,
    "shouldDisplayMessage" : true,
    "hasContent" : true
  },
  "afterStages" : [ ],
  "labels" : [ {
    "name" : "host",
    "value" : "6d4a09583807"
  }, {
    "name" : "thread",
    "value" : "1064-MainThread"
  }, {
    "name" : "framework",
    "value" : "pytest-bdd"
  }, {
    "name" : "language",
    "value" : "cpython3"
  }, {
    "name" : "feature",
    "value" : "Record vaccine"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ {
    "name" : "address",
    "value" : "2 BIRCH STREET, LYTHAM ST. ANNES, LANCS, FY8 5DT"
  }, {
    "name" : "assess_date",
    "value" : "today-3"
  }, {
    "name" : "batch_expiry_date",
    "value" : "19/10/2026"
  }, {
    "name" : "batch_number",
    "value" : "SDYY2-14C"
  }, {
    "name" : "care_model",
    "value" : "Vaccination Centre"
  }, {
    "name" : "chosen_vaccine",
    "value" : "Flu"
  }, {
    "name" : "consent",
    "value" : "yes"
  }, {
    "name" : "dob",
    "value" : "17/7/1994"
  }, {
    "name" : "eligibility",
    "value" : "yes"
  }, {
    "name" : "index",
    "value" : "11"
  }, {
    "name" : "name",
    "value" : "MARIAN PIESSE"
  }, {
    "name" : "nhs_number",
    "value" : "9450134391"
  }, {
    "name" : "site",
    "value" : "ALBERT HOUSE"
  }, {
    "name" : "vaccination",
    "value" : "yes"
  }, {
    "name" : "vaccination_date",
    "value" : "today"
  }, {
    "name" : "vaccine_type",
    "value" : "Quadrivalent Influvac sub - unit Tetra - QIVe"
  } ],
  "links" : [ ],
  "hidden" : false,
  "retry" : false,
  "extra" : {
    "severity" : "normal",
    "retries" : [ ],
    "categories" : [ {
      "name" : "Product defects",
      "matchedStatuses" : [ ],
      "flaky" : false
    } ],
    "tags" : [ ]
  },
  "source" : "d9a0afd7a5dc2324.json",
  "parameterValues" : [ "2 BIRCH STREET, LYTHAM ST. ANNES, LANCS, FY8 5DT", "today-3", "19/10/2026", "SDYY2-14C", "Vaccination Centre", "Flu", "yes", "17/7/1994", "yes", "11", "MARIAN PIESSE", "9450134391", "ALBERT HOUSE", "yes", "today", "Quadrivalent Influvac sub - unit Tetra - QIVe" ]
}