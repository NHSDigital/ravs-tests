{
  "uid" : "9105327a7508c8e",
  "name" : "Record a vaccine with nhs number [12-9450140960-ALBERT HOUSE-Hospital Hub-yes-today-1-yes-yes-today-DEANA GAMBLES-5/9/1993-10 GRASMERE ROAD, LYTHAM ST. ANNES, LANCS, FY8 2HZ-Flu-Flucelvax Tetra - QIVc-SDYY2-20A-19/10/2026]",
  "fullName" : "/app/features/record_a_vaccine_for_patient_with_nhs_number.feature:Record a vaccine with nhs number",
  "historyId" : "1c2dbfbab6fdd49ab82b72ee8a6411dd",
  "time" : {
    "start" : 1723827354284,
    "stop" : 1723827390619,
    "duration" : 36335
  },
  "status" : "failed",
  "statusMessage" : "TypeError: choose_vaccine_and_vaccine_type_for_patient() missing 1 required positional argument: 'vaccine_type'",
  "statusTrace" : "fixturefunc = <function step_choose_vaccine_and_vaccine_type at 0x7efca279e3e0>\nrequest = <FixtureRequest for <Function test_record_a_vaccine_with_nhs_number[12-9450140960-ALBERT HOUSE-Hospital Hub-yes-today-... GAMBLES-5/9/1993-10 GRASMERE ROAD, LYTHAM ST. ANNES, LANCS, FY8 2HZ-Flu-Flucelvax Tetra - QIVc-SDYY2-20A-19/10/2026]>>\nkwargs = {'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-20A', 'chosen_vaccine': 'Flu', 'shared_data': {'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-20A', 'care_model': 'Hospital Hub', 'chosen_vaccine': 'Flu', ...}, ...}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n.tox/py311/lib/python3.11/site-packages/_pytest/fixtures.py:897: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nshared_data = {'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-20A', 'care_model': 'Hospital Hub', 'chosen_vaccine': 'Flu', ...}\nchosen_vaccine = 'Flu', vaccine_type = 'Flucelvax Tetra - QIVc'\nbatch_number = 'SDYY2-20A', batch_expiry_date = '19/10/2026'\n\n    @when(parse(\"I click choose vaccine button and choose the {chosen_vaccine}, {vaccine_type}, {batch_number} with {batch_expiry_date} and click continue\"))\n    def step_choose_vaccine_and_vaccine_type(shared_data, chosen_vaccine, vaccine_type, batch_number, batch_expiry_date):\n        immunisation_history_records_count_before_vaccination = click_on_patient_search_result_and_click_choose_vaccine(shared_data['patient_name'], chosen_vaccine)\n        shared_data[\"immunisation_history_records_count_before_vaccination\"] = immunisation_history_records_count_before_vaccination\n>       choose_vaccine_and_vaccine_type_for_patient(chosen_vaccine, vaccine_type)\nE       TypeError: choose_vaccine_and_vaccine_type_for_patient() missing 1 required positional argument: 'vaccine_type'\n\ntests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py:73: TypeError",
  "flaky" : false,
  "newFailed" : false,
  "newBroken" : false,
  "newPassed" : false,
  "retriesCount" : 0,
  "retriesStatusChange" : false,
  "beforeStages" : [ ],
  "testStage" : {
    "status" : "failed",
    "statusMessage" : "TypeError: choose_vaccine_and_vaccine_type_for_patient() missing 1 required positional argument: 'vaccine_type'",
    "statusTrace" : "fixturefunc = <function step_choose_vaccine_and_vaccine_type at 0x7efca279e3e0>\nrequest = <FixtureRequest for <Function test_record_a_vaccine_with_nhs_number[12-9450140960-ALBERT HOUSE-Hospital Hub-yes-today-... GAMBLES-5/9/1993-10 GRASMERE ROAD, LYTHAM ST. ANNES, LANCS, FY8 2HZ-Flu-Flucelvax Tetra - QIVc-SDYY2-20A-19/10/2026]>>\nkwargs = {'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-20A', 'chosen_vaccine': 'Flu', 'shared_data': {'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-20A', 'care_model': 'Hospital Hub', 'chosen_vaccine': 'Flu', ...}, ...}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n.tox/py311/lib/python3.11/site-packages/_pytest/fixtures.py:897: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nshared_data = {'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-20A', 'care_model': 'Hospital Hub', 'chosen_vaccine': 'Flu', ...}\nchosen_vaccine = 'Flu', vaccine_type = 'Flucelvax Tetra - QIVc'\nbatch_number = 'SDYY2-20A', batch_expiry_date = '19/10/2026'\n\n    @when(parse(\"I click choose vaccine button and choose the {chosen_vaccine}, {vaccine_type}, {batch_number} with {batch_expiry_date} and click continue\"))\n    def step_choose_vaccine_and_vaccine_type(shared_data, chosen_vaccine, vaccine_type, batch_number, batch_expiry_date):\n        immunisation_history_records_count_before_vaccination = click_on_patient_search_result_and_click_choose_vaccine(shared_data['patient_name'], chosen_vaccine)\n        shared_data[\"immunisation_history_records_count_before_vaccination\"] = immunisation_history_records_count_before_vaccination\n>       choose_vaccine_and_vaccine_type_for_patient(chosen_vaccine, vaccine_type)\nE       TypeError: choose_vaccine_and_vaccine_type_for_patient() missing 1 required positional argument: 'vaccine_type'\n\ntests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py:73: TypeError",
    "steps" : [ {
      "name" : "Given I login to RAVS and set vaccinator details with ALBERT HOUSE and Hospital Hub and get patient details for 9450140960 with option 12 and choose to vaccinate with vaccine details as Flu, Flucelvax Tetra - QIVc, SDYY2-20A with 19/10/2026",
      "time" : {
        "start" : 1723827354285,
        "stop" : 1723827382997,
        "duration" : 28712
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "6f35cb32fa32af8d",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_settings.png",
        "source" : "6f35cb32fa32af8d.png",
        "type" : "image/png",
        "size" : 36740
      }, {
        "uid" : "fdec5a60fd8c7f45",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_vaccines.png",
        "source" : "fdec5a60fd8c7f45.png",
        "type" : "image/png",
        "size" : 37692
      }, {
        "uid" : "abd19dae8570f9f2",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_add_vaccines.png",
        "source" : "abd19dae8570f9f2.png",
        "type" : "image/png",
        "size" : 127948
      }, {
        "uid" : "8ef9721198d709ee",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_site_radio_button.png",
        "source" : "8ef9721198d709ee.png",
        "type" : "image/png",
        "size" : 73798
      }, {
        "uid" : "663e6c02f30c9f4e",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_flu_vaccine_checkbox.png",
        "source" : "663e6c02f30c9f4e.png",
        "type" : "image/png",
        "size" : 84685
      }, {
        "uid" : "87ae9d623822bd24",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_flu_vaccine_type_checkbox.png",
        "source" : "87ae9d623822bd24.png",
        "type" : "image/png",
        "size" : 106803
      }, {
        "uid" : "6d117385856ca48a",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_add_vaccine_button.png",
        "source" : "6d117385856ca48a.png",
        "type" : "image/png",
        "size" : 107129
      }, {
        "uid" : "d7208ef57cb34d84",
        "name" : "dev_chrome_127.0.6533.119_entered_batch_number.png",
        "source" : "d7208ef57cb34d84.png",
        "type" : "image/png",
        "size" : 119610
      }, {
        "uid" : "b8d912f838f2b945",
        "name" : "dev_chrome_127.0.6533.119_entered_expiry_date.png",
        "source" : "b8d912f838f2b945.png",
        "type" : "image/png",
        "size" : 88153
      }, {
        "uid" : "391340b7c417629",
        "name" : "dev_chrome_127.0.6533.119_clicked_add_batch_button.png",
        "source" : "391340b7c417629.png",
        "type" : "image/png",
        "size" : 89268
      }, {
        "uid" : "3a9e919ba7b63e50",
        "name" : "dev_chrome_127.0.6533.119_clicked_confirm_choices_button.png",
        "source" : "3a9e919ba7b63e50.png",
        "type" : "image/png",
        "size" : 66169
      }, {
        "uid" : "5f658977f57029d1",
        "name" : "dev_chrome_127.0.6533.119_clicked_confirm_choices_button.png",
        "source" : "5f658977f57029d1.png",
        "type" : "image/png",
        "size" : 80686
      }, {
        "uid" : "d4244eaa795572f5",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_settings.png",
        "source" : "d4244eaa795572f5.png",
        "type" : "image/png",
        "size" : 59498
      }, {
        "uid" : "46040970b0057d67",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_vaccines.png",
        "source" : "46040970b0057d67.png",
        "type" : "image/png",
        "size" : 38521
      }, {
        "uid" : "5bd5ace0e30953b3",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_add_vaccines.png",
        "source" : "5bd5ace0e30953b3.png",
        "type" : "image/png",
        "size" : 127948
      }, {
        "uid" : "d082da12704afa30",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_site_radio_button.png",
        "source" : "d082da12704afa30.png",
        "type" : "image/png",
        "size" : 73798
      }, {
        "uid" : "49e7d353f6acf246",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_flu_vaccine_checkbox.png",
        "source" : "49e7d353f6acf246.png",
        "type" : "image/png",
        "size" : 84685
      }, {
        "uid" : "fda59265f6867e8",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_flu_vaccine_type_checkbox.png",
        "source" : "fda59265f6867e8.png",
        "type" : "image/png",
        "size" : 106803
      }, {
        "uid" : "13e43aff69f76d7",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_add_vaccine_button.png",
        "source" : "13e43aff69f76d7.png",
        "type" : "image/png",
        "size" : 107132
      }, {
        "uid" : "ce4cd1e7b2074315",
        "name" : "dev_chrome_127.0.6533.119_entered_batch_number.png",
        "source" : "ce4cd1e7b2074315.png",
        "type" : "image/png",
        "size" : 119592
      }, {
        "uid" : "ab0e6893b259c7ed",
        "name" : "dev_chrome_127.0.6533.119_entered_expiry_date.png",
        "source" : "ab0e6893b259c7ed.png",
        "type" : "image/png",
        "size" : 88140
      }, {
        "uid" : "1325adf933d7e3",
        "name" : "dev_chrome_127.0.6533.119_clicked_add_batch_button.png",
        "source" : "1325adf933d7e3.png",
        "type" : "image/png",
        "size" : 91724
      }, {
        "uid" : "6d12f2e009a9eee4",
        "name" : "dev_chrome_127.0.6533.119_clicked_confirm_choices_button.png",
        "source" : "6d12f2e009a9eee4.png",
        "type" : "image/png",
        "size" : 67779
      }, {
        "uid" : "9ec9658db9207d17",
        "name" : "dev_chrome_127.0.6533.119_clicked_confirm_choices_button.png",
        "source" : "9ec9658db9207d17.png",
        "type" : "image/png",
        "size" : 85071
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 24,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I search for a patient with the NHS number in the find a patient screen",
      "time" : {
        "start" : 1723827382997,
        "stop" : 1723827384157,
        "duration" : 1160
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "715671b831cd710c",
        "name" : "dev_chrome_127.0.6533.119_entered_nhs_number_as9450140960_and_clicked_search_for_patient_button.png",
        "source" : "715671b831cd710c.png",
        "type" : "image/png",
        "size" : 60291
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I open the patient record by clicking on patient DEANA GAMBLES",
      "time" : {
        "start" : 1723827384158,
        "stop" : 1723827384922,
        "duration" : 764
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "1686219d72d5ec",
        "name" : "dev_chrome_127.0.6533.119_before_clicking_patient_name.png",
        "source" : "1686219d72d5ec.png",
        "type" : "image/png",
        "size" : 60328
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "When I click choose vaccine button and choose the Flu, Flucelvax Tetra - QIVc, SDYY2-20A with 19/10/2026 and click continue",
      "time" : {
        "start" : 1723827384923,
        "stop" : 1723827390619,
        "duration" : 5696
      },
      "status" : "failed",
      "statusMessage" : "choose_vaccine_and_vaccine_type_for_patient() missing 1 required positional argument: 'vaccine_type'",
      "statusTrace" : "TypeError: choose_vaccine_and_vaccine_type_for_patient() missing 1 required positional argument: 'vaccine_type'\n",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "7eeabc9cbe6d0dcc",
        "name" : "dev_chrome_127.0.6533.119_clicked_on_patient_DEANA GAMBLES_and_clicked_choose_vaccine_button.png",
        "source" : "7eeabc9cbe6d0dcc.png",
        "type" : "image/png",
        "size" : 104067
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : true,
      "hasContent" : true
    } ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 4,
    "attachmentsCount" : 27,
    "shouldDisplayMessage" : true,
    "hasContent" : true
  },
  "afterStages" : [ ],
  "labels" : [ {
    "name" : "host",
    "value" : "6d4a09583807"
  }, {
    "name" : "thread",
    "value" : "1067-MainThread"
  }, {
    "name" : "framework",
    "value" : "pytest-bdd"
  }, {
    "name" : "language",
    "value" : "cpython3"
  }, {
    "name" : "feature",
    "value" : "Record vaccine"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ {
    "name" : "address",
    "value" : "10 GRASMERE ROAD, LYTHAM ST. ANNES, LANCS, FY8 2HZ"
  }, {
    "name" : "assess_date",
    "value" : "today-1"
  }, {
    "name" : "batch_expiry_date",
    "value" : "19/10/2026"
  }, {
    "name" : "batch_number",
    "value" : "SDYY2-20A"
  }, {
    "name" : "care_model",
    "value" : "Hospital Hub"
  }, {
    "name" : "chosen_vaccine",
    "value" : "Flu"
  }, {
    "name" : "consent",
    "value" : "yes"
  }, {
    "name" : "dob",
    "value" : "5/9/1993"
  }, {
    "name" : "eligibility",
    "value" : "yes"
  }, {
    "name" : "index",
    "value" : "12"
  }, {
    "name" : "name",
    "value" : "DEANA GAMBLES"
  }, {
    "name" : "nhs_number",
    "value" : "9450140960"
  }, {
    "name" : "site",
    "value" : "ALBERT HOUSE"
  }, {
    "name" : "vaccination",
    "value" : "yes"
  }, {
    "name" : "vaccination_date",
    "value" : "today"
  }, {
    "name" : "vaccine_type",
    "value" : "Flucelvax Tetra - QIVc"
  } ],
  "links" : [ ],
  "hidden" : false,
  "retry" : false,
  "extra" : {
    "severity" : "normal",
    "retries" : [ ],
    "categories" : [ {
      "name" : "Product defects",
      "matchedStatuses" : [ ],
      "flaky" : false
    } ],
    "tags" : [ ]
  },
  "source" : "9105327a7508c8e.json",
  "parameterValues" : [ "10 GRASMERE ROAD, LYTHAM ST. ANNES, LANCS, FY8 2HZ", "today-1", "19/10/2026", "SDYY2-20A", "Hospital Hub", "Flu", "yes", "5/9/1993", "yes", "12", "DEANA GAMBLES", "9450140960", "ALBERT HOUSE", "yes", "today", "Flucelvax Tetra - QIVc" ]
}