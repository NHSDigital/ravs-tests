{
  "uid" : "f8ba844b692fa07d",
  "name" : "Record a vaccine with nhs number [12-9450140960-BIRCH HOUSE-Hospital Hub-yes-today-1-yes-yes-today-DEANA GAMBLES-5/9/1993-10 GRASMERE ROAD, LYTHAM ST. ANNES, LANCS, FY8 2HZ-Flu-SDYY2-20A-19/10/2026]",
  "fullName" : "/app/features/record_a_vaccine_for_patient_with_nhs_number.feature:Record a vaccine with nhs number",
  "historyId" : "02946c8fafa2ed02d379748078859176",
  "time" : {
    "start" : 1730832219080,
    "stop" : 1730832273675,
    "duration" : 54595
  },
  "status" : "failed",
  "statusMessage" : "AssertionError: assert 0 >= (9 + 1)\n +  where 0 = int(0)\n +  and   9 = int(9)",
  "statusTrace" : "fixturefunc = <function immunisation_history_should_be_updated at 0x7f61d8c31f80>\nrequest = <FixtureRequest for <Function test_record_a_vaccine_with_nhs_number[12-9450140960-BIRCH HOUSE-Hospital Hub-yes-today-1-yes-yes-today-DEANA GAMBLES-5/9/1993-10 GRASMERE ROAD, LYTHAM ST. ANNES, LANCS, FY8 2HZ-Flu-SDYY2-20A-19/10/2026]>>\nkwargs = {'shared_data': {'assessment_comments': 'Assessment comments 04/11/2024DEANA GAMBLES', 'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-20A', 'care_model': 'Hospital hub for staff and patients', ...}}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n.tox/py311/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nshared_data = {'assessment_comments': 'Assessment comments 04/11/2024DEANA GAMBLES', 'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-20A', 'care_model': 'Hospital hub for staff and patients', ...}\n\n    @then(\"the immunisation history of the patient should be updated in the patient details page\")\n    def immunisation_history_should_be_updated(shared_data):\n        immunisation_history_records_count_after_vaccination = get_count_of_immunisation_history_records(shared_data[\"chosen_vaccine\"])\n>       assert int(immunisation_history_records_count_after_vaccination) >= int(shared_data[\"immunisation_history_records_count_before_vaccination\"]) + 1\nE       assert 0 >= (9 + 1)\nE        +  where 0 = int(0)\nE        +  and   9 = int(9)\n\ntests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py:168: AssertionError",
  "flaky" : false,
  "newFailed" : false,
  "newBroken" : false,
  "newPassed" : false,
  "retriesCount" : 0,
  "retriesStatusChange" : false,
  "beforeStages" : [ ],
  "testStage" : {
    "status" : "failed",
    "statusMessage" : "AssertionError: assert 0 >= (9 + 1)\n +  where 0 = int(0)\n +  and   9 = int(9)",
    "statusTrace" : "fixturefunc = <function immunisation_history_should_be_updated at 0x7f61d8c31f80>\nrequest = <FixtureRequest for <Function test_record_a_vaccine_with_nhs_number[12-9450140960-BIRCH HOUSE-Hospital Hub-yes-today-1-yes-yes-today-DEANA GAMBLES-5/9/1993-10 GRASMERE ROAD, LYTHAM ST. ANNES, LANCS, FY8 2HZ-Flu-SDYY2-20A-19/10/2026]>>\nkwargs = {'shared_data': {'assessment_comments': 'Assessment comments 04/11/2024DEANA GAMBLES', 'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-20A', 'care_model': 'Hospital hub for staff and patients', ...}}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n.tox/py311/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nshared_data = {'assessment_comments': 'Assessment comments 04/11/2024DEANA GAMBLES', 'batch_expiry_date': '19/10/2026', 'batch_number': 'SDYY2-20A', 'care_model': 'Hospital hub for staff and patients', ...}\n\n    @then(\"the immunisation history of the patient should be updated in the patient details page\")\n    def immunisation_history_should_be_updated(shared_data):\n        immunisation_history_records_count_after_vaccination = get_count_of_immunisation_history_records(shared_data[\"chosen_vaccine\"])\n>       assert int(immunisation_history_records_count_after_vaccination) >= int(shared_data[\"immunisation_history_records_count_before_vaccination\"]) + 1\nE       assert 0 >= (9 + 1)\nE        +  where 0 = int(0)\nE        +  and   9 = int(9)\n\ntests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py:168: AssertionError",
    "steps" : [ {
      "name" : "Given I login to RAVS and set vaccinator details with BIRCH HOUSE and Hospital Hub and get patient details for 9450140960 with option 12 and choose to vaccinate with vaccine details as Flu, SDYY2-20A with 19/10/2026",
      "time" : {
        "start" : 1730832219080,
        "stop" : 1730832219808,
        "duration" : 728
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    }, {
      "name" : "And I search for a patient with the NHS number in the find a patient screen",
      "time" : {
        "start" : 1730832219809,
        "stop" : 1730832220168,
        "duration" : 359
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "b8af518c06bf1a4f",
        "name" : "dev_chrome_130.0.6723.116_entered_nhs_number_as9450140960_and_clicked_search_for_patient_button.png",
        "source" : "b8af518c06bf1a4f.png",
        "type" : "image/png",
        "size" : 48589
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I open the patient record by clicking on patient DEANA GAMBLES",
      "time" : {
        "start" : 1730832220168,
        "stop" : 1730832220867,
        "duration" : 699
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "c7aa7acc0a3d2ee4",
        "name" : "dev_chrome_130.0.6723.116_before_clicking_patient_name.png",
        "source" : "c7aa7acc0a3d2ee4.png",
        "type" : "image/png",
        "size" : 48629
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "When I click choose vaccine button and choose the Flu, SDYY2-20A with 19/10/2026 and click continue",
      "time" : {
        "start" : 1730832220867,
        "stop" : 1730832224134,
        "duration" : 3267
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "f056c2b973e29ac9",
        "name" : "dev_chrome_130.0.6723.116_clicked_on_patient_DEANA GAMBLES_and_clicked_choose_vaccine_button.png",
        "source" : "f056c2b973e29ac9.png",
        "type" : "image/png",
        "size" : 81652
      }, {
        "uid" : "d3a6da35e4b0d81c",
        "name" : "dev_chrome_130.0.6723.116_selected_vaccine_Flu_and_Cell-based Quadrivalent Influenza Vaccine_and_clicked_continue_button.png",
        "source" : "d3a6da35e4b0d81c.png",
        "type" : "image/png",
        "size" : 74389
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 2,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I assess the patient's yes with the details and date as today-1 and click continue to record consent screen button",
      "time" : {
        "start" : 1730832224134,
        "stop" : 1730832225466,
        "duration" : 1332
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "3aa06066c2b521e9",
        "name" : "dev_chrome_130.0.6723.116_clicked_eligibility_yes_and_selected_eligibility_type.png",
        "source" : "3aa06066c2b521e9.png",
        "type" : "image/png",
        "size" : 75173
      }, {
        "uid" : "62283db0655be67d",
        "name" : "dev_chrome_130.0.6723.116_clicked_patient_give_vaccine_radio_button.png",
        "source" : "62283db0655be67d.png",
        "type" : "image/png",
        "size" : 74535
      }, {
        "uid" : "d952a17cce708ef2",
        "name" : "dev_chrome_130.0.6723.116_clicked_continue_to_record_consent_button.png",
        "source" : "d952a17cce708ef2.png",
        "type" : "image/png",
        "size" : 43460
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I record yes with the details and click continue to vaccinate button",
      "time" : {
        "start" : 1730832225466,
        "stop" : 1730832226984,
        "duration" : 1518
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "db2865abfaca4a0c",
        "name" : "dev_chrome_130.0.6723.116_before_selecting_consent_clinician.png",
        "source" : "db2865abfaca4a0c.png",
        "type" : "image/png",
        "size" : 43460
      }, {
        "uid" : "1a87588751fe20aa",
        "name" : "dev_chrome_130.0.6723.116_clicked_continue_to_vaccinate_button.png",
        "source" : "1a87588751fe20aa.png",
        "type" : "image/png",
        "size" : 59727
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 2,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I record yes details and date as today and click Continue to Check and confirm screen",
      "time" : {
        "start" : 1730832226984,
        "stop" : 1730832231068,
        "duration" : 4084
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "19a31d7fb9431347",
        "name" : "dev_chrome_130.0.6723.116_entered_vaccination_details.png",
        "source" : "19a31d7fb9431347.png",
        "type" : "image/png",
        "size" : 54572
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "Then I need to be able to see the patient DEANA GAMBLES, 5/9/1993, 10 GRASMERE ROAD, LYTHAM ST. ANNES, LANCS, FY8 2HZ and vaccination details on the check and confirm screen",
      "time" : {
        "start" : 1730832231068,
        "stop" : 1730832231811,
        "duration" : 743
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "e1c9c2a66e4f4ed9",
        "name" : "dev_chrome_130.0.6723.116_check_and_confirm_screen_before_assertion.png",
        "source" : "e1c9c2a66e4f4ed9.png",
        "type" : "image/png",
        "size" : 53324
      }, {
        "uid" : "be678b3233817d79",
        "name" : "dev_chrome_130.0.6723.116_vaccination_dose_amount.png",
        "source" : "be678b3233817d79.png",
        "type" : "image/png",
        "size" : 53347
      }, {
        "uid" : "255dfeda30ee4d1f",
        "name" : "dev_chrome_130.0.6723.116_check_and_confirm_screen_after_assertion.png",
        "source" : "255dfeda30ee4d1f.png",
        "type" : "image/png",
        "size" : 53347
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And when I click confirm and save button, I should see a record saved dialogue",
      "time" : {
        "start" : 1730832231811,
        "stop" : 1730832232557,
        "duration" : 746
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "660c2030f5629db4",
        "name" : "dev_chrome_130.0.6723.116_patient_details_screen_with_immunisation_history.png",
        "source" : "660c2030f5629db4.png",
        "type" : "image/png",
        "size" : 53347
      }, {
        "uid" : "a21bdf071777476e",
        "name" : "dev_chrome_130.0.6723.116_before_assert_record_saved.png",
        "source" : "a21bdf071777476e.png",
        "type" : "image/png",
        "size" : 34843
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 2,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I search for a patient with the NHS number in the find a patient screen",
      "time" : {
        "start" : 1730832232558,
        "stop" : 1730832232917,
        "duration" : 359
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "9cdd9048cce012b7",
        "name" : "dev_chrome_130.0.6723.116_entered_nhs_number_as9450140960_and_clicked_search_for_patient_button.png",
        "source" : "9cdd9048cce012b7.png",
        "type" : "image/png",
        "size" : 37580
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I open the patient record by clicking on patient DEANA GAMBLES",
      "time" : {
        "start" : 1730832232917,
        "stop" : 1730832253334,
        "duration" : 20417
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "7014ad419cbf3e93",
        "name" : "dev_chrome_130.0.6723.116_before_clicking_patient_name.png",
        "source" : "7014ad419cbf3e93.png",
        "type" : "image/png",
        "size" : 37617
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And the immunisation history of the patient should be updated in the patient details page",
      "time" : {
        "start" : 1730832253335,
        "stop" : 1730832273675,
        "duration" : 20340
      },
      "status" : "failed",
      "statusMessage" : "assert 0 >= (9 + 1)\n +  where 0 = int(0)\n +  and   9 = int(9)",
      "statusTrace" : "AssertionError: assert 0 >= (9 + 1)\n +  where 0 = int(0)\n +  and   9 = int(9)\n",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : true,
      "hasContent" : true
    } ],
    "attachments" : [ {
      "uid" : "7cc61de1b3d1a328",
      "name" : "log",
      "source" : "7cc61de1b3d1a328.txt",
      "type" : "text/plain",
      "size" : 11903
    } ],
    "parameters" : [ ],
    "stepsCount" : 12,
    "attachmentsCount" : 18,
    "shouldDisplayMessage" : true,
    "hasContent" : true
  },
  "afterStages" : [ ],
  "labels" : [ {
    "name" : "host",
    "value" : "285eba521044"
  }, {
    "name" : "thread",
    "value" : "1099-MainThread"
  }, {
    "name" : "framework",
    "value" : "pytest-bdd"
  }, {
    "name" : "language",
    "value" : "cpython3"
  }, {
    "name" : "feature",
    "value" : "Record vaccine"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ {
    "name" : "address",
    "value" : "10 GRASMERE ROAD, LYTHAM ST. ANNES, LANCS, FY8 2HZ"
  }, {
    "name" : "assess_date",
    "value" : "today-1"
  }, {
    "name" : "batch_expiry_date",
    "value" : "19/10/2026"
  }, {
    "name" : "batch_number",
    "value" : "SDYY2-20A"
  }, {
    "name" : "care_model",
    "value" : "Hospital Hub"
  }, {
    "name" : "chosen_vaccine",
    "value" : "Flu"
  }, {
    "name" : "consent",
    "value" : "yes"
  }, {
    "name" : "dob",
    "value" : "5/9/1993"
  }, {
    "name" : "eligibility",
    "value" : "yes"
  }, {
    "name" : "index",
    "value" : "12"
  }, {
    "name" : "name",
    "value" : "DEANA GAMBLES"
  }, {
    "name" : "nhs_number",
    "value" : "9450140960"
  }, {
    "name" : "site",
    "value" : "BIRCH HOUSE"
  }, {
    "name" : "vaccination",
    "value" : "yes"
  }, {
    "name" : "vaccination_date",
    "value" : "today"
  } ],
  "links" : [ ],
  "hidden" : false,
  "retry" : false,
  "extra" : {
    "severity" : "normal",
    "retries" : [ ],
    "categories" : [ {
      "name" : "Product defects",
      "matchedStatuses" : [ ],
      "flaky" : false
    } ],
    "tags" : [ ]
  },
  "source" : "f8ba844b692fa07d.json",
  "parameterValues" : [ "10 GRASMERE ROAD, LYTHAM ST. ANNES, LANCS, FY8 2HZ", "today-1", "19/10/2026", "SDYY2-20A", "Hospital Hub", "Flu", "yes", "5/9/1993", "yes", "12", "DEANA GAMBLES", "9450140960", "BIRCH HOUSE", "yes", "today" ]
}