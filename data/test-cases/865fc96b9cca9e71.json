{
  "uid" : "865fc96b9cca9e71",
  "name" : "Record a vaccine with nhs number [12-9437540233-ALBERT HOUSE-Hospital hub for staff and patients-yes-today-15-yes-yes-today-7-RANDY FOGDEN-8/6/1961-10 ASHVILLE TERRACE, MANCHESTER, M40 9WG-COVID-19-AUTOMATION-SJ1-19/10/2026]",
  "fullName" : "/app/features/record_a_vaccine_for_patient_with_nhs_number.feature:Record a vaccine with nhs number",
  "historyId" : "04d2ff1a4bc22d23d9818fc9738c679b",
  "time" : {
    "start" : 1731610016422,
    "stop" : 1731610056395,
    "duration" : 39973
  },
  "status" : "failed",
  "statusMessage" : "AssertionError: assert 40 >= (40 + 1)\n +  where 40 = int(40)\n +  and   40 = int(40)",
  "statusTrace" : "fixturefunc = <function immunisation_history_should_be_updated at 0x7f18da9b1c60>\nrequest = <FixtureRequest for <Function test_record_a_vaccine_with_nhs_number[12-9437540233-ALBERT HOUSE-Hospital hub for staff ...15-yes-yes-today-7-RANDY FOGDEN-8/6/1961-10 ASHVILLE TERRACE, MANCHESTER, M40 9WG-COVID-19-AUTOMATION-SJ1-19/10/2026]>>\nkwargs = {'shared_data': {'assessment_comments': 'Assessment comments 30/10/2024RANDY FOGDEN', 'batch_expiry_date': '19/10/2026', 'batch_number': 'AUTOMATION-SJ1', 'care_model': 'Hospital hub for staff and patients', ...}}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n.tox/py311/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nshared_data = {'assessment_comments': 'Assessment comments 30/10/2024RANDY FOGDEN', 'batch_expiry_date': '19/10/2026', 'batch_number': 'AUTOMATION-SJ1', 'care_model': 'Hospital hub for staff and patients', ...}\n\n    @then(\"the immunisation history of the patient should be updated in the patient details page\")\n    def immunisation_history_should_be_updated(shared_data):\n        attach_screenshot(\"immunisation_history_records_count_after_vaccination\")\n        immunisation_history_records_count_after_vaccination = get_count_of_immunisation_history_records(shared_data[\"chosen_vaccine\"])\n>       assert int(immunisation_history_records_count_after_vaccination) >= int(shared_data[\"immunisation_history_records_count_before_vaccination\"]) + 1\nE       assert 40 >= (40 + 1)\nE        +  where 40 = int(40)\nE        +  and   40 = int(40)\n\ntests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py:171: AssertionError",
  "flaky" : false,
  "newFailed" : false,
  "newBroken" : false,
  "newPassed" : false,
  "retriesCount" : 0,
  "retriesStatusChange" : false,
  "beforeStages" : [ ],
  "testStage" : {
    "status" : "failed",
    "statusMessage" : "AssertionError: assert 40 >= (40 + 1)\n +  where 40 = int(40)\n +  and   40 = int(40)",
    "statusTrace" : "fixturefunc = <function immunisation_history_should_be_updated at 0x7f18da9b1c60>\nrequest = <FixtureRequest for <Function test_record_a_vaccine_with_nhs_number[12-9437540233-ALBERT HOUSE-Hospital hub for staff ...15-yes-yes-today-7-RANDY FOGDEN-8/6/1961-10 ASHVILLE TERRACE, MANCHESTER, M40 9WG-COVID-19-AUTOMATION-SJ1-19/10/2026]>>\nkwargs = {'shared_data': {'assessment_comments': 'Assessment comments 30/10/2024RANDY FOGDEN', 'batch_expiry_date': '19/10/2026', 'batch_number': 'AUTOMATION-SJ1', 'care_model': 'Hospital hub for staff and patients', ...}}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n.tox/py311/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nshared_data = {'assessment_comments': 'Assessment comments 30/10/2024RANDY FOGDEN', 'batch_expiry_date': '19/10/2026', 'batch_number': 'AUTOMATION-SJ1', 'care_model': 'Hospital hub for staff and patients', ...}\n\n    @then(\"the immunisation history of the patient should be updated in the patient details page\")\n    def immunisation_history_should_be_updated(shared_data):\n        attach_screenshot(\"immunisation_history_records_count_after_vaccination\")\n        immunisation_history_records_count_after_vaccination = get_count_of_immunisation_history_records(shared_data[\"chosen_vaccine\"])\n>       assert int(immunisation_history_records_count_after_vaccination) >= int(shared_data[\"immunisation_history_records_count_before_vaccination\"]) + 1\nE       assert 40 >= (40 + 1)\nE        +  where 40 = int(40)\nE        +  and   40 = int(40)\n\ntests/test_record_a_vaccine_for_patient_with_nhs_number_steps.py:171: AssertionError",
    "steps" : [ {
      "name" : "Given I login to RAVS and set vaccinator details with ALBERT HOUSE and Hospital hub for staff and patients and get patient details for 9437540233 with option 12 and choose to vaccinate with vaccine details as COVID-19, AUTOMATION-SJ1 with 19/10/2026",
      "time" : {
        "start" : 1731610016423,
        "stop" : 1731610020140,
        "duration" : 3717
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    }, {
      "name" : "And I search for a patient with the NHS number in the find a patient screen",
      "time" : {
        "start" : 1731610020141,
        "stop" : 1731610025445,
        "duration" : 5304
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "ade617c78570a381",
        "name" : "dev_edge_130.0.2849.80_entered_nhs_number_as9437540233_and_clicked_search_for_patient_button.png",
        "source" : "ade617c78570a381.png",
        "type" : "image/png",
        "size" : 48857
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I open the patient record by clicking on patient RANDY FOGDEN",
      "time" : {
        "start" : 1731610025446,
        "stop" : 1731610030309,
        "duration" : 4863
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "da20db35d3b3a735",
        "name" : "dev_edge_130.0.2849.80_before_clicking_patient_name.png",
        "source" : "da20db35d3b3a735.png",
        "type" : "image/png",
        "size" : 48902
      }, {
        "uid" : "52b3b2f548b14c3c",
        "name" : "dev_edge_130.0.2849.80_before_clicking_patient_name.png",
        "source" : "52b3b2f548b14c3c.png",
        "type" : "image/png",
        "size" : 52490
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 2,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "When I click choose vaccine button and choose the COVID-19, AUTOMATION-SJ1 with 19/10/2026 and click continue",
      "time" : {
        "start" : 1731610030310,
        "stop" : 1731610038143,
        "duration" : 7833
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "47aaa27258d6dcdc",
        "name" : "dev_edge_130.0.2849.80_clicked_on_patient_RANDY FOGDEN_and_clicked_choose_vaccine_button.png",
        "source" : "47aaa27258d6dcdc.png",
        "type" : "image/png",
        "size" : 82059
      }, {
        "uid" : "bc0e070301de47de",
        "name" : "dev_edge_130.0.2849.80_selected_vaccine_COVID-19_and_Spikevax JN.1_and_clicked_continue_button.png",
        "source" : "bc0e070301de47de.png",
        "type" : "image/png",
        "size" : 74774
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 2,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I assess the patient's yes with the details and date as today-15 and click continue to record consent screen button",
      "time" : {
        "start" : 1731610038143,
        "stop" : 1731610039294,
        "duration" : 1151
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "276a824c51a0f6c1",
        "name" : "dev_edge_130.0.2849.80_clicked_eligibility_yes_and_selected_eligibility_type.png",
        "source" : "276a824c51a0f6c1.png",
        "type" : "image/png",
        "size" : 72946
      }, {
        "uid" : "17467b325cd3f703",
        "name" : "dev_edge_130.0.2849.80_clicked_patient_give_vaccine_radio_button.png",
        "source" : "17467b325cd3f703.png",
        "type" : "image/png",
        "size" : 47825
      }, {
        "uid" : "23a5ee9e4c6f1692",
        "name" : "dev_edge_130.0.2849.80_clicked_continue_to_record_consent_button.png",
        "source" : "23a5ee9e4c6f1692.png",
        "type" : "image/png",
        "size" : 42943
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I record yes with the details and click continue to vaccinate button",
      "time" : {
        "start" : 1731610039295,
        "stop" : 1731610039845,
        "duration" : 550
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "12c8d0e0f8c0dfbe",
        "name" : "dev_edge_130.0.2849.80_before_selecting_consent_clinician.png",
        "source" : "12c8d0e0f8c0dfbe.png",
        "type" : "image/png",
        "size" : 42939
      }, {
        "uid" : "4d82316227d00a1d",
        "name" : "dev_edge_130.0.2849.80_clicked_continue_to_vaccinate_button.png",
        "source" : "4d82316227d00a1d.png",
        "type" : "image/png",
        "size" : 71160
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 2,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I record yes details and date as today-7 and click Continue to Check and confirm screen",
      "time" : {
        "start" : 1731610039846,
        "stop" : 1731610043634,
        "duration" : 3788
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "bf976bb58d04cbfd",
        "name" : "dev_edge_130.0.2849.80_entered_vaccination_details.png",
        "source" : "bf976bb58d04cbfd.png",
        "type" : "image/png",
        "size" : 51501
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "Then I need to be able to see the patient RANDY FOGDEN, 8/6/1961, 10 ASHVILLE TERRACE, MANCHESTER, M40 9WG and vaccination details on the check and confirm screen",
      "time" : {
        "start" : 1731610043635,
        "stop" : 1731610044417,
        "duration" : 782
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "d7bea7869ac642ff",
        "name" : "dev_edge_130.0.2849.80_check_and_confirm_screen_before_assertion.png",
        "source" : "d7bea7869ac642ff.png",
        "type" : "image/png",
        "size" : 51517
      }, {
        "uid" : "13283ad5e544beab",
        "name" : "dev_edge_130.0.2849.80_vaccination_dose_amount.png",
        "source" : "13283ad5e544beab.png",
        "type" : "image/png",
        "size" : 51517
      }, {
        "uid" : "3c5f451df32e6e43",
        "name" : "dev_edge_130.0.2849.80_check_and_confirm_screen_after_assertion.png",
        "source" : "3c5f451df32e6e43.png",
        "type" : "image/png",
        "size" : 51517
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 3,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And when I click confirm and save button, I should see a record saved dialogue",
      "time" : {
        "start" : 1731610044417,
        "stop" : 1731610045218,
        "duration" : 801
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "5829334522ba4317",
        "name" : "dev_edge_130.0.2849.80_patient_details_screen_with_immunisation_history.png",
        "source" : "5829334522ba4317.png",
        "type" : "image/png",
        "size" : 51517
      }, {
        "uid" : "93b37b7375a51122",
        "name" : "dev_edge_130.0.2849.80_before_assert_record_saved.png",
        "source" : "93b37b7375a51122.png",
        "type" : "image/png",
        "size" : 34849
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 2,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I search for a patient with the NHS number in the find a patient screen",
      "time" : {
        "start" : 1731610045218,
        "stop" : 1731610050447,
        "duration" : 5229
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "5f1411dcff0ed82a",
        "name" : "dev_edge_130.0.2849.80_entered_nhs_number_as9437540233_and_clicked_search_for_patient_button.png",
        "source" : "5f1411dcff0ed82a.png",
        "type" : "image/png",
        "size" : 46893
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And I open the patient record by clicking on patient RANDY FOGDEN",
      "time" : {
        "start" : 1731610050447,
        "stop" : 1731610053258,
        "duration" : 2811
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "fd5dc0cf587fb6b2",
        "name" : "dev_edge_130.0.2849.80_before_clicking_patient_name.png",
        "source" : "fd5dc0cf587fb6b2.png",
        "type" : "image/png",
        "size" : 46893
      }, {
        "uid" : "ae544a17bd6e5606",
        "name" : "dev_edge_130.0.2849.80_before_clicking_patient_name.png",
        "source" : "ae544a17bd6e5606.png",
        "type" : "image/png",
        "size" : 52490
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 2,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "And the immunisation history of the patient should be updated in the patient details page",
      "time" : {
        "start" : 1731610053258,
        "stop" : 1731610056395,
        "duration" : 3137
      },
      "status" : "failed",
      "statusMessage" : "assert 40 >= (40 + 1)\n +  where 40 = int(40)\n +  and   40 = int(40)",
      "statusTrace" : "AssertionError: assert 40 >= (40 + 1)\n +  where 40 = int(40)\n +  and   40 = int(40)\n",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "971672cbec14c1b6",
        "name" : "dev_edge_130.0.2849.80_immunisation_history_records_count_after_vaccination.png",
        "source" : "971672cbec14c1b6.png",
        "type" : "image/png",
        "size" : 52490
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : true,
      "hasContent" : true
    } ],
    "attachments" : [ {
      "uid" : "84fe0f95c4813d5f",
      "name" : "log",
      "source" : "84fe0f95c4813d5f.txt",
      "type" : "text/plain",
      "size" : 16565
    } ],
    "parameters" : [ ],
    "stepsCount" : 12,
    "attachmentsCount" : 21,
    "shouldDisplayMessage" : true,
    "hasContent" : true
  },
  "afterStages" : [ ],
  "labels" : [ {
    "name" : "host",
    "value" : "777d74e1afc0"
  }, {
    "name" : "thread",
    "value" : "1100-MainThread"
  }, {
    "name" : "framework",
    "value" : "pytest-bdd"
  }, {
    "name" : "language",
    "value" : "cpython3"
  }, {
    "name" : "feature",
    "value" : "Record vaccine"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ {
    "name" : "address",
    "value" : "10 ASHVILLE TERRACE, MANCHESTER, M40 9WG"
  }, {
    "name" : "assess_date",
    "value" : "today-15"
  }, {
    "name" : "batch_expiry_date",
    "value" : "19/10/2026"
  }, {
    "name" : "batch_number",
    "value" : "AUTOMATION-SJ1"
  }, {
    "name" : "care_model",
    "value" : "Hospital hub for staff and patients"
  }, {
    "name" : "chosen_vaccine",
    "value" : "COVID-19"
  }, {
    "name" : "consent",
    "value" : "yes"
  }, {
    "name" : "dob",
    "value" : "8/6/1961"
  }, {
    "name" : "eligibility",
    "value" : "yes"
  }, {
    "name" : "index",
    "value" : "12"
  }, {
    "name" : "name",
    "value" : "RANDY FOGDEN"
  }, {
    "name" : "nhs_number",
    "value" : "9437540233"
  }, {
    "name" : "site",
    "value" : "ALBERT HOUSE"
  }, {
    "name" : "vaccination",
    "value" : "yes"
  }, {
    "name" : "vaccination_date",
    "value" : "today-7"
  } ],
  "links" : [ ],
  "hidden" : false,
  "retry" : false,
  "extra" : {
    "severity" : "normal",
    "retries" : [ ],
    "categories" : [ {
      "name" : "Product defects",
      "matchedStatuses" : [ ],
      "flaky" : false
    } ],
    "tags" : [ ]
  },
  "source" : "865fc96b9cca9e71.json",
  "parameterValues" : [ "10 ASHVILLE TERRACE, MANCHESTER, M40 9WG", "today-15", "19/10/2026", "AUTOMATION-SJ1", "Hospital hub for staff and patients", "COVID-19", "yes", "8/6/1961", "yes", "12", "RANDY FOGDEN", "9437540233", "ALBERT HOUSE", "yes", "today-7" ]
}